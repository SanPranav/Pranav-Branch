<!DOCTYPE html>
<html>

    <head>
        <link rel="manifest" href="/manifest.json">
    </head>

    <body>
        <div style="padding: 100px;">
            <p id="lmao">helo</p>
            <br>
            <div style="width: 500px; background-color: black; padding: 10px;">
                <div style="width: 500px; background-color: white;" id="reader">
                    <p>Oops! Something went wrong</p>
                </div>
            </div>
        </div>
    </body>

    <script src="html5-qrcode.min.js"></script>
    <script>        
        // This method will trigger user permissions
        Html5Qrcode.getCameras().then(devices => {

        if (devices && devices.length) {
            var cameraId = devices[0].id;
            const html5QrCode = new Html5Qrcode(/* element id */ "reader", verbose=false);
            html5QrCode.start(
                cameraId, 
                {
                    fps: 10,    // Optional, frame per seconds for qr code scanning
                    qrbox: { width: 250, height: 250 }  // Optional, if you want bounded box UI
                },
                (decodedText, decodedResult) => {
                    console.log(decodedText)
                },
                (errorMessage) => {
                    // parse error, ignore it.
                })
                .catch((err) => {
                // Start failed, handle it.
                });
                }
            }).catch(err => {
            // handle err
            });

    </script>
    <script>
        if ("serviceWorker" in navigator) {
        window.addEventListener("load", function() {
            navigator.serviceWorker
            .register("/serviceWorker.js")
            .then(res => console.log("service worker registered"))
            .catch(err => console.log("service worker not registered", err))
        })
        }
    </script>
</html>